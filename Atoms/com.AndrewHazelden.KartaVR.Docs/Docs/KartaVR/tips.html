<!DOCTYPE html>
<html>
<head>
<title>Documentation</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
/* Stylesheet for Markdown */

/* RESET
=============================================================================*/

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
}

/* BODY
=============================================================================*/

@font-face {
    font-family: 'Source Sans Pro';
    font-style: normal;
    font-weight: 300;
    src: url('fonts/SourceSansPro-Regular.ttf');
}

@font-face {
    font-family: 'Source Code Pro';
    font-style: normal;
    font-weight: 400;
    src: url('fonts/SourceCodePro-Regular.ttf');
}

@import url("fonts/font-awesome.min.css");

body {
  font-family: "Source Sans Pro", Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  color: #333;
  background-color: #1C1C1C;
  padding: 20px;
  max-width: 960px;
  margin: 0 auto;
}

body>*:first-child {
  margin-top: 0 !important;
}

body>*:last-child {
  margin-bottom: 0 !important;
}

/* BLOCKS
=============================================================================*/

p, blockquote, ul, ol, dl, table, pre {
  margin: 15px 0;
  color: #AAAAAA;
  /* color: #7D8686; */
}

/* HEADERS
=============================================================================*/

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
}

h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
  font-size: inherit;
}

h1 {
  font-size: 28px;
  font-weight: 600;
  color: #FFFFFF;
}

h2 {
  font-size: 24px;
  font-weight: 500;
  border-bottom: 2px solid #D0D0D0;
  color: #D0D0D0;
}

h3 {
  font-size: 18px;
  font-weight: 400;
  color: #D0D0D0;
}

h4 {
  font-size: 16px;
  color: #D0D0D0;
}

h5 {
  font-size: 14px;
  color: #D0D0D0;
}

h6 {
  font-size: 14px;
  color: #D0D0D0;
}

h7 {
  font-size: 14px;
  color: #D0D0D0;
  /* color: #277BA5; */
}

body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {
  margin-top: 0;
  padding-top: 0;
}

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0;
}

h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {
  margin-top: 10px;
}

/* LINKS
=============================================================================*/

a {
  color: #4183C4;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/* LISTS
=============================================================================*/

ul, ol {
  padding-left: 30px;
  color: #C4C4C4;
}

ul li > :first-child, 
ol li > :first-child, 
ul li ul:first-of-type, 
ol li ol:first-of-type, 
ul li ol:first-of-type, 
ol li ul:first-of-type {
  margin-top: 0px;
}

ul ul, ul ol, ol ol, ol ul {
  margin-bottom: 0;
}

dl {
  padding: 0;
}

dl dt {
  font-size: 14px;
  font-weight: bold;
  font-style: italic;
  padding: 0;
  margin: 15px 0 5px;
}

dl dt:first-child {
  padding: 0;
}

dl dt>:first-child {
  margin-top: 0px;
}

dl dt>:last-child {
  margin-bottom: 0px;
}

dl dd {
  margin: 0 0 15px;
  padding: 0 15px;
}

dl dd>:first-child {
  margin-top: 0px;
}

dl dd>:last-child {
  margin-bottom: 0px;
}

/* CODE
=============================================================================*/

pre, code, tt {
  font-size: 12px;
  font-family: "Source Code Pro", monospace;
}

code, tt {
  margin: 0 0px;
  padding: 0px 0px;
  white-space: nowrap;
  border: 1px solid #262626;
  background-color: #363636;
  color: #D0D0D0;
  border-radius: 3px;
}

pre>code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent;
}

pre {
  background-color: #363636;
  border: 1px solid #262626;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px;
}

pre code, pre tt {
  background-color: transparent;
  border: none;
}

kbd {
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #DDDDDD;
    background-image: linear-gradient(#F1F1F1, #DDDDDD);
    background-repeat: repeat-x;
    border-color: #DDDDDD #CCCCCC #CCCCCC #DDDDDD;
    border-image: none;
    border-radius: 2px 2px 2px 2px;
    border-style: solid;
    border-width: 1px;
    font-family: "Source Sans Pro", Helvetica, arial, sans-serif;
    line-height: 10px;
    padding: 1px 4px;
}

/* QUOTES
=============================================================================*/

blockquote {
  border-left: 4px solid #DDD;
  padding: 0 15px;
  color: #777;
}

blockquote>:first-child {
  margin-top: 0px;
}

blockquote>:last-child {
  margin-bottom: 0px;
}

/* HORIZONTAL RULES
=============================================================================*/

hr {
  clear: both;
  margin: 15px 0;
  height: 0px;
  overflow: hidden;
  border: none;
  background: transparent;
  border-bottom: 4px solid #ddd;
  padding: 0;
}

/* TABLES
=============================================================================*/

table th {
  font-weight: bold;
}

table th, table td {
  /* border: 1px solid #ccc; */ 
  /* padding: 6px 13px; */ 
}

table tr {
  /* border-top: 1px solid #ccc; */
  /* background-color: #363636; */
  /* color: #D0D0D0; */
}


/* IMAGES
=============================================================================*/

img {
  max-width: 80%;
  /* max-width: 100%; */
  display: block;
  margin-left: auto;
  margin-right: auto;
}
</style>
</head>
<body><h1>Tips &amp; Tricks</h1>
<p>This section covers tips &amp; tricks for getting the most out of Fusion and the KartaVR.</p>
<h2>Table of Contents</h2>
<ul>
<li><a href="tips.html#defaults">Fusion Comp Defaults</a>
<ul>
<li><a href="tips.html#color-depth-defaults">Color Depth</a></li>
<li><a href="tips.html#3d-view-defaults">3D View</a></li>
</ul>
</li>
<li><a href="tips.html#8-bit-per-channel-viewer-tools">8 Bit Per Channel Viewing Tools</a></li>
<li><a href="tips.html#bin">Changing the Bin Window Views</a></li>
<li><a href="tips.html#vr-tools">Supporting Tools for VR Production</a></li>
<li><a href="tips.html#using-expressions-to-set-the-image-resolution">Using Expressions to set the Image Resolution</a></li>
<li><a href="tips.html#enable-hiq-mode-from-lua">Enable HiQ Mode from Lua</a></li>
<li><a href="tips.html#breaking-the-32k-resolution-barrier">Breaking the 32K Resolution Barrier</a></li>
</ul>
<h2><a name="defaults"></a>Fusion Comp Defaults</h2>
<p>It is a good idea to edit the Fusion comp's default settings for the frame size and default bit depth. These settings are used automatically by many of the KartaVR automatically.</p>
<p>If you open the Fusion preferences and switch to the <strong>Frame Format</strong> section you can pull down a default format preset or manually specify the <strong>Width</strong>, <strong>Height</strong>, and <strong>Frame Rate</strong>.</p>
<p>These settings are then used for many nodes including the Background node.</p>
<p><img src="images/fusion-frame-format-defaults.png" alt="Fusion Comp Defaults" /></p>
<h3><a name="color-depth-defaults"></a>Color Depth</h3>
<p>The Color Depth setting in the <strong>Frame Format</strong> section allows you to choose if you want to keep a comp as an 8 bit per channel output or have all the nodes work in a high dynamic range.</p>
<p>For example, any Fusion node (including those nodes that are embedded in Macros) that has its bit depth option set to use the &quot;default&quot; option pulls its 8 bit int/16 bit int/16 bit float/32 bit float current state from the Fusion Frame format preferences.</p>
<p>In the preferences window you can have one preference setting defined in the <strong>Globals and Default Settings</strong> section, and then override those options per Fusion comp by scrolling down on the left side of the preferences window, and then select one of the currently open composites in the list and adjust its specific controls.</p>
<p>This is useful for making comp specific decisions for attributes like the Path Map which allows you to define a custom relative path based folder mapping.</p>
<h3><a name="3d-view-defaults"></a>3D View</h3>
<p>If you are using the 3D nodes in Fusion or any of the KartaVR that tie into the Fusion 3D system, the <strong>3D View</strong> section in the Preferences window can be really useful and handy.</p>
<p><img src="images/fusion-3d-view-defaults.png" alt="Fusion 3D View Defaults" /></p>
<p>This section allows you to customize attributes like the <strong>Near Plane</strong> and <strong>Far Plane</strong> which are used for camera view clipping.</p>
<p>You can also adjust the default camera field of view using the <strong>Angle of View</strong> control.</p>
<p>If you want to change the 3D viewport grid settings, too, they are accessible at the top of the 3D View preferences section.</p>
<h3><a name="8-bit-per-channel-viewer-tools"></a>8 Bit Per Channel Viewing Tools</h3>
<p>Several of the &quot;PanoView&quot; viewer tools, and the &quot;Send Media To&quot; programs only support an 8 bit per channel integer image color depth. If you try to send a 16 or 32 bit per channel float image to the programs the imagery cannot be viewed until you use a Change Depth node to switch the media to a compatible format.</p>
<p>This is done by going to the <strong>Tools &gt; Miscellaneous &gt; Change Depth</strong> menu item to add the node to your comp.</p>
<p><img src="images/fusion-change-depth-tool.png" alt="Change Depth Menu Item" /></p>
<p>Then in the &quot;Change Depth&quot; node you need to set the output to either <code>8bit int</code> or <code>16bit int</code>. Now your HDRI sourced imagery can be loaded into Affinity Photo without any issues.</p>
<p><img src="images/fusion-change-depth-node.png" alt="Change Depth Node" /></p>
<h2><a name="bin"></a>Changing the Bin Window Views</h2>
<p>To customize the views in the Bins window, right click in the folder view and navigate your way through the contextual menu options.</p>
<p>The <code>Icon Size</code> option is useful if you want to shrink the size of the bin icons so you can get more screen space.</p>
<p><img src="images/library-icons-size-menu.png" alt="Bins Icon Size Menu" /></p>
<hr />
<p>The <code>Sort</code> option is useful if the Bin items aren't arranged alphabetically.</p>
<p><img src="images/library-sort-name.png" alt="Bins Sort Menu" /></p>
<hr />
<p>You can use the <code>View</code> option to change how the Bin items are listed. My favorite view types are <code>large Icons</code>, <code>Small Icons</code>, and <code>List</code>.</p>
<p><img src="images/library-view-menu.png" alt="Bins View Menu" /></p>
<h2><a name="vr-tools"></a>Supporting Tools for VR Production</h2>
<p>If you want to get the most out of panoramic immersive compositing in Fusion the following supporting tools are really handy to have installed on the average workstation.</p>
<h3>Programmer's Text Editor</h3>
<p>If you need to edit Fusion data files there are custom Fusion .comp, hotkeys .fu, and Macros .setting <a href="#syntax-highlighter">Fusion Comp Syntax Highlighters</a> included with the KartaVR. They work nicely with the following text editors:</p>
<ul>
<li><a href="http://www.notepad-plus-plus.org/">Notepad++</a> (Windows)</li>
<li><a href="http://www.barebones.com/products/textwrangler/">TextWrangler</a> (Mac)</li>
<li><a href="http://www.barebones.com/products/bbedit/">BBEdit</a> (Mac)</li>
<li><a href="https://wiki.gnome.org/Apps/Gedit">Gedit</a> (Windows/Mac/Linux)</li>
</ul>
<h3>Essential Media Viewers</h3>
<ul>
<li><a href="http://www.kolor.com/gopro-vr-player/download/">GoPro VR Player (formerly Kolor Eyes)</a></li>
<li><a href="http://whirligig.xyz/">Whirligig</a></li>
<li><a href="http://www.orihalcon.co.jp/amaterasplayer/en/">Amateras Dome Player</a></li>
<li><a href="http://djv.sourceforge.net/">DJV Viewer</a></li>
<li><a href="http://www.videolan.org/">VLC</a></li>
<li><a href="http://www.mettle.com">Mettle SkyBox Player</a> (For Adobe Premiere)</li>
</ul>
<p><strong>Note:</strong> Kolor Eyes was recently turned into the GoPro VR Player application.</p>
<h3>Spatial Media Metadata Embedding</h3>
<ul>
<li><a href="https://support.google.com/youtube/answer/6178631">YouTube 360 Video Metadata Tool</a></li>
</ul>
<h3>Fusion Fuses</h3>
<ul>
<li>Stefan Ihringer's <a href="http://www.comp-fu.com/2011/04/cube-map-to-equirectangular-latlong-map/">Cube to LatLong Fuse</a></li>
<li>Stefan Ihringer's <a href="http://www.comp-fu.com/2012/02/linear-gamma-workflow-in-fusion/">sRGB ViewLUT module</a></li>
</ul>
<h3>Panoramic Stitching Tools</h3>
<ul>
<li><a href="http://www.ptgui.com">PTGui Pro</a> (This tool is used in the <strong><a href="scripts.html#generate-uv-pass-in-ptgui">Generate UV Pass in PTGui</a></strong> script.)</li>
<li><a href="http://hugin.sourceforge.net">Hugin</a> (Open Source)</li>
</ul>
<h2><a name="using-expressions-to-set-the-image-resolution"></a>Using Expressions to set the Image Resolution</h2>
<p>Often you are working with a lot of nodes in KartaVR that need to have the image resolution set automatically based upon your input footage. This is the perfect place to use Fusion's expression language to automate the settings instead of having to manually update these values.</p>
<p>Right clicking on any of the node attributes in Fusion will display a popup menu. You can then select the &quot;Add Expression&quot; option. Another technique is to type &quot;=&quot; into the number field and a new expression text field will be added automatically.</p>
<p>If you have an image loader node in your scene called &quot;Loader1&quot; you can read it's current image width and height resolution settings using these variables:</p>
<p><code>Loader1.Output.OriginalWidth</code><br />
<code>Loader1.Output.OriginalHeight</code></p>
<p>If you have a merge node in your scene called &quot;Merge1&quot; you can read the background input connection's current image width and height resolution settings using these variables:</p>
<p><code>Merge.Background.OriginalHeight</code><br />
<code>Merge.Background.OriginalWidth</code></p>
<p>If you wanted to set a node to use 50% of the image size of your loader node you would enter the expressions:</p>
<p><code>Loader1.Output.OriginalWidth * 0.5</code><br />
<code>Loader1.Output.OriginalHeight * 0.5</code></p>
<p>You can read the size of a specific image connection on a CustomTool node using:</p>
<p><code>ImageGridCustomTool.Image1.Width</code><br />
<code>ImageGridCustomTool.Image1.Height</code></p>
<p><code>ImageGridCustomTool.Image2.Width</code><br />
<code>ImageGridCustomTool.Image2.Height</code></p>
<p><code>ImageGridCustomTool.Image2.Width</code><br />
<code>ImageGridCustomTool.Image2.Height</code></p>
<h3>Real World Expression Examples</h3>
<p>The process of learning about expressions can often be abstract. Here is a real world application of using the image size from a loader node to drive a composite.</p>
<p><img src="images/tips-expressions-for-image-size.png" alt="Expressions" /></p>
<p>When I use an Equirectangular2CubicFace node in my composite I will often add an expression to the <strong>Input Height</strong> control and set it to:</p>
<p><code>Loader1.Output.OriginalHeight</code></p>
<p>This will mean that my Equirectangular2CubicFace node output will automatically scale its rendered resolution to match the source imagery I connect to the node.</p>
<h2><a name="enable-hiq-mode-from-lua"></a>Enable HiQ Mode from Lua</h2>
<p>If you are writing a new Lua script and need to have the HiQ mode turned on by default you can add the following example snippet to your code:</p>
<p><code>comp:SetAttrs{COMPB_HiQ = true}</code></p>
<h2><a name="breaking-the-32k-resolution-barrier"></a>Breaking the 32K Resolution Barrier</h2>
<p>Fusion has an environment variable you can define if you'd like to use CPU based rendering of your composite and break the 32K x 32K image resolution barrier.</p>
<p>The environment variable is:</p>
<pre><code>	FUSION_Embiggen = True
</code></pre>
<p>If you would like to know more about <code>FUSION_Embiggen</code>  environment variable, then check out the Steakunderwater forum post:</p>
<p><a href="https://www.steakunderwater.com/wesuckless/viewtopic.php?p=19700#p19700">The S-Files Episode 3: creating very large images in Fusion.</a></p>
<p>You will also see an entry on that post about a <code>LimitToHalfMaxTextureSize</code> UserControls based hidden parameter that will increase the texture resolution in Fusion's 3D workspace.</p>
</body>
</html>